{
  "id": "admission-default",
  "canonicalName": "admission-machine",
  "initials": [
    "U:admission-in-waiting-confirmation-default"
  ],
  "description": "Define all flows of an admission",
  "version": "0.1.0",
  "universes": {
    "admission-in-waiting-confirmation-default": {
      "id": "admission-in-waiting-confirmation-default",
      "canonicalName": "admission-in-waiting-confirmation",
      "version": "0.1.0",
      "initial": "CREATED",
      "realities": {
        "CREATED": {
          "id": "CREATED",
          "type": "transition",
          "always": [
            {
              "targets": [
                "WAITING_CONFIRMATION"
              ]
            }
          ]
        },
        "WAITING_CONFIRMATION": {
          "id": "WAITING_CONFIRMATION",
          "type": "transition",
          "on": {
            "confirm": [
              {
                "targets": [
                  "CONFIRMED"
                ]
              }
            ],
            "reject": [
              {
                "targets": [
                  "U:admission-rejected-default"
                ]
              }
            ]
          }
        },
        "CONFIRMED": {
          "id": "CONFIRMED",
          "type": "final",
          "always": [
            {
              "targets": [
                "U:admission-form-process-default",
                "U:admission-contract-process-default"
              ]
            }
          ]
        }
      }
    },

    "admission-form-process-default": {
      "id": "admission-form-process-default",
      "canonicalName": "admission-form-process",
      "version": "0.1.0",
      "initial": "FILLING_FORM",
      "realities": {
        "FILLING_FORM": {
          "id": "FILLING_FORM",
          "type": "transition",
          "on": {
            "fill-form": [
              {
                "targets": [
                  "FILLED"
                ]
              }
            ],
            "manual-complete": [
              {
                "targets": [
                  "FILLED"
                ]
              }
            ]
          }
        },
        "FILLED": {
          "id": "FILLED",
          "type": "final",
          "always": [
            {
              "targets": [
                "U:admission-waiting-processes:WAITING_PROCESSES"
              ]
            }
          ]
        }
      }
    },

    "admission-contract-process-default": {
      "id": "admission-contract-process-default",
      "canonicalName": "admission-contract-process",
      "version": "0.1.0",
      "initial": "SIGNING_DATA_CONSENT",
      "realities": {
        "SIGNING_DATA_CONSENT": {
          "id": "SIGNING_DATA_CONSENT",
          "type": "transition",
          "on": {
            "sign": [
              {
                "targets": [
                  "DATA_CONSENT_SIGNED"
                ]
              }
            ],
            "manual-complete": [
              {
                "targets": [
                  "SIGNING_DATA_CONSENT"
                ]
              }
            ]
          }
        },
        "DATA_CONSENT_SIGNED": {
          "id": "DATA_CONSENT_SIGNED",
          "type": "transition",
          "always": [
            {
              "targets": [
                "U:admission-waiting-processes:WAITING_PROCESSES"
              ]
            }
          ]
        },
        "SIGNING_ENROLLMENT_CONTRACT": {
          "id": "SIGNING_ENROLLMENT_CONTRACT",
          "type": "transition",
          "on": {
            "sign": [
              {
                "targets": [
                  "ENROLLMENT_CONTRACT_SIGNED"
                ]
              }
            ],
            "manual-complete": [
              {
                "targets": [
                  "ENROLLMENT_CONTRACT_SIGNED"
                ]
              }
            ]
          }
        },
        "ENROLLMENT_CONTRACT_SIGNED": {
          "id": "ENROLLMENT_CONTRACT_SIGNED",
          "type": "final",
          "always": [
            {
              "targets": [
                "U:admission-completed-default"
              ]
            }
          ]
        }
      }
    },
    "admission-waiting-processes": {
      "id": "admission-waiting-processes",
      "canonicalName": "waiting-processes",
      "version": "0.1.0",
      "realities": {
        "WAITING_PROCESSES": {
          "id": "WAITING_PROCESSES",
          "type": "transition",
          "observers": [
            {
              "src": "builtin:observer:containsAllEvents",
              "args": {
                "p1": "fill-form",
                "p2": "sign"
              }
            },
            {
              "src": "builtin:observer:containsAllEvents",
              "args": {
                "p1": "manual-complete"
              }
            }
          ],
          "always": [
            {
              "targets": [
                "U:admission-contract-process-default:SIGNING_ENROLLMENT_CONTRACT"
              ]
            }
          ]
        }
      }
    },
    "admission-rejected-default": {
      "id": "admission-rejected-default",
      "canonicalName": "admission-rejected",
      "version": "0.1.0",
      "realities": {
        "REJECTED": {
          "id": "REJECTED",
          "type": "unsuccessfulFinal",
          "entryActions": [
            {
              "src": "disableAdmission",
              "description": "Set admission context to disabled"
            }
          ]
        }
      }
    },
    "admission-cancelled-default": {
      "id": "admission-cancelled-default",
      "canonicalName": "admission-cancelled",
      "version": "0.1.0",
      "realities": {
        "CANCELLED": {
          "id": "CANCELLED",
          "type": "unsuccessfulFinal",
          "entryActions": [
            {
              "src": "disableAdmission",
              "description": "Set admission context to disabled"
            }
          ]
        }
      }
    },
    "admission-completed-default": {
      "id": "admission-completed-default",
      "canonicalName": "admission-completed",
      "version": "0.1.0",
      "realities": {
        "COMPLETED": {
          "id": "COMPLETED",
          "type": "final"
        }
      }
    }
  }
}